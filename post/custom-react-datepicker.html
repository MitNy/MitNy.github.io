<!DOCTYPE html><html><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-W055DP4N3J"></script><script>
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);}
					gtag('js', new Date());
					gtag('config', 'G-W055DP4N3J');</script><head><meta charSet="utf-8"/><meta name="description" content="기록 저장소"/><meta property="og:description" content="기록 저장소"/><meta property="og:url" content="https://mitny.github.io"/><meta property="og:type" content="website"/><meta property="og:locale" content="ko_KR"/><meta property="og:site_name" content="MitNy.log"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><title>react-datepicker 커스텀 해서 사용하기 with TypeScript |  MitNy.log</title><meta name="robots" content="index,follow"/><meta property="og:title" content="react-datepicker 커스텀 해서 사용하기 with TypeScript |  MitNy.log"/><link rel="canonical" href="https://mitny.github.io/post/custom-react-datepicker"/><meta name="next-head-count" content="12"/><meta name="naver-site-verification" content="b408dee953bcbbb1038384f191f36dac0551c0fb"/><meta name="google-site-verification" content="vUtYhRYNCWYYTdurCRaVmtnWpPLuXKKwRAm5F6R9sNs"/><link rel="preload" href="/_next/static/css/e6a7c67d207b98b3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e6a7c67d207b98b3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-005bdf76005efab4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-14a2a9a26060c1d3.js" defer=""></script><script src="/_next/static/chunks/401-9f1400d964d6d7ce.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-ef72dfdcfccf709c.js" defer=""></script><script src="/_next/static/nJPyYqODS0udXw2rMLLyn/_buildManifest.js" defer=""></script><script src="/_next/static/nJPyYqODS0udXw2rMLLyn/_ssgManifest.js" defer=""></script></head><link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><body><div id="__next" data-reactroot=""><div class="header h-16 bg-white drop-shadow-md text-black"><div class="mx-10 pt-3 cursor-pointer"><p class="header-home text-3xl float-left">MitNy.log</p><p class="text-base font-bold pt-2 float-right">About</p></div></div><div class="mx-10 my-8"><div class="w-full min-h-screen pb-24 mt-8"><div class="w-full min-h-screen pb-24 mt-8"><article class="prose max-w-none"><div class="border-b"><p class="text-4xl font-bold mb-0">react-datepicker 커스텀 해서 사용하기 with TypeScript</p><p class="text-xs text-neutral-500">2023-04-12</p></div><div><p>캘린더에서 날짜를 선택할 수 있도록 해주는 DatePicker를 사용해야 하는데<br>
기존에 사용하던 jQuery DatePicker 대신 <code>react-datepicker</code> 라이브러리를 사용하고자 한다.<br></p>
<p><a href="https://reactdatepicker.com/" target="_blank" rel="noopener noreferrer">react-datepicker 공식 사이트</a></p>
<h3 id="설치">설치</h3>
<pre><code class="code-highlight"><span class="code-line">npm install -D react-datepicker
</span><span class="code-line">npm install -D @types/react-datepicker // typescript가 아니라면 생략
</span><span class="code-line">npm install -D date-fns // locale 설정에서 사용
</span></code></pre>
<p><code>react-datepicker</code>의 기본 디자인에서 추가 해야할 커스텀 항목은 3가지 정도이다.<br></p>
<ol>
<li>년도와 월을 각각 선택할 수 있는 Select element</li>
<li>오늘 날짜로 변경해주는 '오늘' 버튼</li>
<li>캘린더를 닫아주는 '닫기' 버튼</li>
</ol>
<p><code>react-datepicker</code>를 제대로 사용하기 위해선 css 파일도 import 해주어야 한다.
커스텀 디자인 같은 경우 추가로 css 파일을 만들어서 변경을 원하는 클래스만 수정하고 import 해주었다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"># _app<span class="token punctuation">.</span><span class="token property-access">tsx</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token string">'react-datepicker/dist/react-datepicker.css'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token string">'styles/custom-datepicker.css'</span><span class="token punctuation">;</span> <span class="token comment">// 커스텀 디자인 css 파일</span>
</span></code></pre>
<p>컴포넌트로 빼서 사용하도록 했는데 대략적 구조와 사용한 DatePicker 옵션은 다음과 같다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">DatePicker</span></span> <span class="token keyword module">from</span> <span class="token string">'react-datepicker'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> ko <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'date-fns/locale'</span><span class="token punctuation">;</span> <span class="token comment">// 언어 설정을 위한 locale import</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function"><span class="token maybe-class-name">CustomDatePicker</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword">const</span> <span class="token punctuation">[</span>startDate<span class="token punctuation">,</span> setStartDate<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>today<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 날짜 선택을 위한 state</span>
</span><span class="code-line">	<span class="token keyword">const</span> ref <span class="token operator">=</span> useRef<span class="token operator">&#x3C;</span><span class="token maybe-class-name">DatePicker</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 캘린더 close를 위한 ref</span>
</span><span class="code-line">	<span class="token keyword">const</span> <span class="token maybe-class-name">CustomInput</span> <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> onClick <span class="token punctuation">}</span><span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span> <span class="token maybe-class-name">Custom</span> <span class="token maybe-class-name">Input</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token operator">&#x3C;</span><span class="token maybe-class-name">DatePicker</span>
</span><span class="code-line">		ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span>
</span><span class="code-line">		locale<span class="token operator">=</span><span class="token punctuation">{</span>ko<span class="token punctuation">}</span> <span class="token comment">// 언어 설정</span>
</span><span class="code-line">		selected<span class="token operator">=</span><span class="token punctuation">{</span>startDate<span class="token punctuation">}</span> <span class="token comment">// 선택된 날짜</span>
</span><span class="code-line">		dateFormat<span class="token operator">=</span><span class="token string">"yyyy-MM-dd"</span> <span class="token comment">// 날짜를 '2023-04-12'와 같이 표시</span>
</span><span class="code-line">		todayButton<span class="token operator">=</span><span class="token string">"오늘"</span> <span class="token comment">// 날짜를 오늘로 변경하는 버튼의 이름 설정</span>
</span><span class="code-line">		onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setStartDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// 날짜 선택 시 상태 변경</span>
</span><span class="code-line">		customInput<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">CustomInput</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span> <span class="token comment">// Custom Input</span>
</span><span class="code-line">		renderCustomHeader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> date<span class="token punctuation">,</span> changeYear<span class="token punctuation">,</span> changeMonth<span class="token punctuation">,</span> decreaseMonth<span class="token punctuation">,</span> increaseMonth<span class="token punctuation">,</span> prevMonthButtonDisabled<span class="token punctuation">,</span> nextMonthButtonDisabled <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// Custom Header</span>
</span><span class="code-line">	<span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">	<span class="token punctuation">{</span> 닫기 버튼이 들어갈 곳 <span class="token punctuation">}</span>
</span><span class="code-line">	<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">DatePicker</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3 id="custom-input">Custom Input</h3>
<p>선택된 날짜가 보여질 곳을 커스텀 할 수 있다.<br>
설정하지 않으면 기본적으로 input 태그가 사용되는데 button으로 변경할 수도 있고, input에 원하는 옵션을 추가할 수도 있다.<br>
기본 input은 키보드 입력으로 수정이 가능하기 때문에 readOnly 옵션을 추가해줄 것이다.<br>
readOnly 옵션을 추가해주면 캘린더로만 날짜를 변경할 수 있다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token maybe-class-name">CustomInput</span> <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> onClick <span class="token punctuation">}</span><span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">	<span class="token operator">&#x3C;</span>input onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> readOnly <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code></pre>
<h3 id="custom-header">Custom Header</h3>
<p>년도와 월을 변경해서 한 번에 해당 년, 월의 캘린더로 이동할 수 있도록 커스텀 하려고 한다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> years <span class="token operator">=</span> <span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token keyword module">from</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">getYear</span><span class="token punctuation">(</span>today<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">10</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 오늘부터 10년 전까지의 년도 [2013, 2014, ...]</span>
</span><span class="code-line"><span class="token keyword">const</span> months <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1월'</span><span class="token punctuation">,</span> <span class="token string">'2월'</span><span class="token punctuation">,</span> <span class="token string">'3월'</span><span class="token punctuation">,</span> <span class="token string">'4월'</span><span class="token punctuation">,</span> <span class="token string">'5월'</span><span class="token punctuation">,</span> <span class="token string">'6월'</span><span class="token punctuation">,</span> <span class="token string">'7월'</span><span class="token punctuation">,</span> <span class="token string">'8월'</span><span class="token punctuation">,</span> <span class="token string">'9월'</span><span class="token punctuation">,</span> <span class="token string">'10월'</span><span class="token punctuation">,</span> <span class="token string">'11월'</span><span class="token punctuation">,</span> <span class="token string">'12월'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">DatePicker</span>
</span><span class="code-line">    <span class="token comment">// 생략</span>
</span><span class="code-line">	renderCustomHeader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> date<span class="token punctuation">,</span> changeYear<span class="token punctuation">,</span> changeMonth<span class="token punctuation">,</span> decreaseMonth<span class="token punctuation">,</span> increaseMonth<span class="token punctuation">,</span> prevMonthButtonDisabled<span class="token punctuation">,</span> nextMonthButtonDisabled <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">		<span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">			<span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decreaseMonth<span class="token punctuation">}</span> disabled<span class="token operator">=</span><span class="token punctuation">{</span>prevMonthButtonDisabled<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">' &#x3C; '</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span> <span class="token comment">// 이전 월로 이동</span>
</span><span class="code-line">			<span class="token operator">&#x3C;</span>select
</span><span class="code-line">				value<span class="token operator">=</span><span class="token punctuation">{</span>date<span class="token punctuation">.</span><span class="token method function property-access">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">				onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">changeYear</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">			<span class="token operator">></span>
</span><span class="code-line">			<span class="token punctuation">{</span>years<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">				<span class="token operator">&#x3C;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>option<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>option<span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line">					<span class="token punctuation">{</span>option<span class="token punctuation">}</span>
</span><span class="code-line">				<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
</span><span class="code-line">			<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">			<span class="token operator">&#x3C;</span><span class="token operator">/</span>select<span class="token operator">></span>
</span><span class="code-line">			<span class="token operator">&#x3C;</span>select
</span><span class="code-line">				value<span class="token operator">=</span><span class="token punctuation">{</span>months<span class="token punctuation">[</span>date<span class="token punctuation">.</span><span class="token method function property-access">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</span><span class="code-line">				<span class="token comment">// months 배열에서 인덱스로 값을 가져오는데 date.getMonth()는 0부터(1월) 시작하므로 months에는 '1월'부터 값을 넣어야 한다.</span>
</span><span class="code-line">				onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">changeMonth</span><span class="token punctuation">(</span>months<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">			<span class="token operator">></span>
</span><span class="code-line">			<span class="token punctuation">{</span>months<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">				<span class="token operator">&#x3C;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>option<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>option<span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line">					<span class="token punctuation">{</span>option<span class="token punctuation">}</span>
</span><span class="code-line">				<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
</span><span class="code-line">			<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">			<span class="token operator">&#x3C;</span><span class="token operator">/</span>select<span class="token operator">></span>
</span><span class="code-line">			<span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increaseMonth<span class="token punctuation">}</span> disabled<span class="token operator">=</span><span class="token punctuation">{</span>nextMonthButtonDisabled<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">' > '</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span> <span class="token comment">// 다음 월로 이동</span>
</span><span class="code-line">		<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">	<span class="token operator">></span>
</span><span class="code-line">	<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">DatePicker</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span></code></pre>
<h3 id="닫기-버튼-추가">닫기 버튼 추가</h3>
<p>오늘로 변경하는 버튼은 DatePicker에 <code>todayButton</code> 옵션을 넘겨주면 간단하게 추가 가능하지만<br>
캘린더를 수동으로 닫을 수 있는 버튼은 따로 없는 듯하다.<br>
캘린더를 닫기 위해 useRef()로 제어해줄 것이다.<br>
캘린더 하단에 위치하는 버튼으로 만들어주려면 <code>&#x3C;DatePicker>&#x3C;/DatePicker></code> 태그 사이에 추가 해주어야 한다.<br></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">DatePicker</span>
</span><span class="code-line">	ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span>
</span><span class="code-line">	<span class="token comment">// 생략</span>
</span><span class="code-line"><span class="token operator">></span>
</span><span class="code-line">	<span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">		<span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> ref<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">.</span><span class="token method function property-access">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>닫기<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
</span><span class="code-line">	<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line"><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">DatePicker</span><span class="token operator">></span>
</span></code></pre>
<p>ref를 추가한 후에 아무리 버튼을 눌러도 캘린더가 사라지지 않아서 뭔가 잘못되었다 싶었는데<br>
검색 해보니 <code>&#x3C;DatePicker></code> 컴포넌트를 <code>&#x3C;label></code> 태그로 감싸면 동작하지 않는다고 한다.<br>
컴포넌트를 호출하는 부분에서 <code>&#x3C;label></code> 태그를 사용하고 있었고, 제거해주니 정상 동작했다..!<br>
<a href="https://github.com/Hacker0x01/react-datepicker/issues/1012" target="_blank" rel="noopener noreferrer">참고 링크</a></p>
<h3 id="결과">결과</h3>
<p>커스텀 디자인까지 적용한 모습이다. <br>
윈도우 녹화는 select option이 안보여서 중간에 년도와 월을 선택하는 과정이 생략되었다.</p>
<img src="/posts/custom-react-datepicker/custom-datepicker.gif" width="500px"/></div></article></div></div></div><footer class="h-16 bg-neutral-500"></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"custom-react-datepicker","content":"\n캘린더에서 날짜를 선택할 수 있도록 해주는 DatePicker를 사용해야 하는데\u003cbr\u003e\n기존에 사용하던 jQuery DatePicker 대신 `react-datepicker` 라이브러리를 사용하고자 한다.\u003cbr\u003e\n\n[react-datepicker 공식 사이트](https://reactdatepicker.com/)\n\n### 설치\n\n```\nnpm install -D react-datepicker\nnpm install -D @types/react-datepicker // typescript가 아니라면 생략\nnpm install -D date-fns // locale 설정에서 사용\n```\n\n`react-datepicker`의 기본 디자인에서 추가 해야할 커스텀 항목은 3가지 정도이다.\u003cbr\u003e\n\n1. 년도와 월을 각각 선택할 수 있는 Select element\n2. 오늘 날짜로 변경해주는 '오늘' 버튼\n3. 캘린더를 닫아주는 '닫기' 버튼\n\n`react-datepicker`를 제대로 사용하기 위해선 css 파일도 import 해주어야 한다.\n커스텀 디자인 같은 경우 추가로 css 파일을 만들어서 변경을 원하는 클래스만 수정하고 import 해주었다.\n\n```js\n# _app.tsx\nimport 'react-datepicker/dist/react-datepicker.css';\nimport 'styles/custom-datepicker.css'; // 커스텀 디자인 css 파일\n```\n\n컴포넌트로 빼서 사용하도록 했는데 대략적 구조와 사용한 DatePicker 옵션은 다음과 같다.\n\n```js\nimport { forwardRef, useRef, useState } from 'react';\nimport DatePicker from 'react-datepicker';\nimport { ko } from 'date-fns/locale'; // 언어 설정을 위한 locale import\n\nexport const CustomDatePicker() =\u003e {\n\tconst [startDate, setStartDate] = useState(today); // 날짜 선택을 위한 state\n\tconst ref = useRef\u003cDatePicker\u003e(null); // 캘린더 close를 위한 ref\n\tconst CustomInput = forwardRef(({ value, onClick }, ref) =\u003e ( Custom Input ));\n\n\t\u003cDatePicker\n\t\tref={ref}\n\t\tlocale={ko} // 언어 설정\n\t\tselected={startDate} // 선택된 날짜\n\t\tdateFormat=\"yyyy-MM-dd\" // 날짜를 '2023-04-12'와 같이 표시\n\t\ttodayButton=\"오늘\" // 날짜를 오늘로 변경하는 버튼의 이름 설정\n\t\tonChange={(date) =\u003e setStartDate(date)} // 날짜 선택 시 상태 변경\n\t\tcustomInput={\u003cCustomInput /\u003e} // Custom Input\n\t\trenderCustomHeader={({ date, changeYear, changeMonth, decreaseMonth, increaseMonth, prevMonthButtonDisabled, nextMonthButtonDisabled }) =\u003e (...)} // Custom Header\n\t/\u003e\n\t{ 닫기 버튼이 들어갈 곳 }\n\t\u003c/DatePicker\u003e\n}\n```\n\n### Custom Input\n\n선택된 날짜가 보여질 곳을 커스텀 할 수 있다.\u003cbr\u003e\n설정하지 않으면 기본적으로 input 태그가 사용되는데 button으로 변경할 수도 있고, input에 원하는 옵션을 추가할 수도 있다.\u003cbr\u003e\n기본 input은 키보드 입력으로 수정이 가능하기 때문에 readOnly 옵션을 추가해줄 것이다.\u003cbr\u003e\nreadOnly 옵션을 추가해주면 캘린더로만 날짜를 변경할 수 있다.\n\n```js\nconst CustomInput = forwardRef(({ value, onClick }, ref) =\u003e (\n\t\u003cinput onClick={onClick} ref={ref} defaultValue={value} readOnly /\u003e\n))\n```\n\n### Custom Header\n\n년도와 월을 변경해서 한 번에 해당 년, 월의 캘린더로 이동할 수 있도록 커스텀 하려고 한다.\n\n```js\n\nconst today = new Date();\nconst years = Array.from(Array(11), (_, i) =\u003e getYear(today) - 10 + i); // 오늘부터 10년 전까지의 년도 [2013, 2014, ...]\nconst months = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];\n\n\u003cDatePicker\n    // 생략\n\trenderCustomHeader={({ date, changeYear, changeMonth, decreaseMonth, increaseMonth, prevMonthButtonDisabled, nextMonthButtonDisabled }) =\u003e (\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbutton onClick={decreaseMonth} disabled={prevMonthButtonDisabled}\u003e{' \u003c '}\u003c/button\u003e // 이전 월로 이동\n\t\t\t\u003cselect\n\t\t\t\tvalue={date.getFullYear()}\n\t\t\t\tonChange={({ target: { value } }) =\u003e changeYear(value)}\n\t\t\t\u003e\n\t\t\t{years.map((option) =\u003e (\n\t\t\t\t\u003coption key={option} value={option}\u003e\n\t\t\t\t\t{option}\n\t\t\t\t\u003c/option\u003e\n\t\t\t))}\n\t\t\t\u003c/select\u003e\n\t\t\t\u003cselect\n\t\t\t\tvalue={months[date.getMonth()]}\n\t\t\t\t// months 배열에서 인덱스로 값을 가져오는데 date.getMonth()는 0부터(1월) 시작하므로 months에는 '1월'부터 값을 넣어야 한다.\n\t\t\t\tonChange={({ target: { value } }) =\u003e changeMonth(months.indexOf(value))}\n\t\t\t\u003e\n\t\t\t{months.map((option) =\u003e (\n\t\t\t\t\u003coption key={option} value={option}\u003e\n\t\t\t\t\t{option}\n\t\t\t\t\u003c/option\u003e\n\t\t\t))}\n\t\t\t\u003c/select\u003e\n\t\t\t\u003cbutton onClick={increaseMonth} disabled={nextMonthButtonDisabled}\u003e{' \u003e '}\u003c/button\u003e // 다음 월로 이동\n\t\t\u003c/div\u003e\n\t\u003e\n\t\u003c/DatePicker\u003e\n)}\n```\n\n### 닫기 버튼 추가\n\n오늘로 변경하는 버튼은 DatePicker에 `todayButton` 옵션을 넘겨주면 간단하게 추가 가능하지만\u003cbr\u003e\n캘린더를 수동으로 닫을 수 있는 버튼은 따로 없는 듯하다.\u003cbr\u003e\n캘린더를 닫기 위해 useRef()로 제어해줄 것이다.\u003cbr\u003e\n캘린더 하단에 위치하는 버튼으로 만들어주려면 `\u003cDatePicker\u003e\u003c/DatePicker\u003e` 태그 사이에 추가 해주어야 한다.\u003cbr\u003e\n\n```js\n\u003cDatePicker\n\tref={ref}\n\t// 생략\n\u003e\n\t\u003cdiv\u003e\n\t\t\u003cbutton onClick={() =\u003e ref.current.setOpen(false)}\u003e닫기\u003c/button\u003e\n\t\u003c/div\u003e\n\u003c/DatePicker\u003e\n```\n\nref를 추가한 후에 아무리 버튼을 눌러도 캘린더가 사라지지 않아서 뭔가 잘못되었다 싶었는데\u003cbr\u003e\n검색 해보니 `\u003cDatePicker\u003e` 컴포넌트를 `\u003clabel\u003e` 태그로 감싸면 동작하지 않는다고 한다.\u003cbr\u003e\n컴포넌트를 호출하는 부분에서 `\u003clabel\u003e` 태그를 사용하고 있었고, 제거해주니 정상 동작했다..!\u003cbr\u003e\n[참고 링크](https://github.com/Hacker0x01/react-datepicker/issues/1012)\n\n### 결과\n\n커스텀 디자인까지 적용한 모습이다. \u003cbr\u003e\n윈도우 녹화는 select option이 안보여서 중간에 년도와 월을 선택하는 과정이 생략되었다.\n\n\u003cimg src=\"/posts/custom-react-datepicker/custom-datepicker.gif\" width=\"500px\"/\u003e\n","title":"react-datepicker 커스텀 해서 사용하기 with TypeScript","description":"년도와 월을 선택할 수 있는 Select, 오늘 날짜로 변경 및 닫기 버튼 추가","date":"2023-04-12"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"custom-react-datepicker"},"buildId":"nJPyYqODS0udXw2rMLLyn","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>