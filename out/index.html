<!DOCTYPE html><html><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-W055DP4N3J"></script><script>
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);}
					gtag('js', new Date());
					gtag('config', 'G-W055DP4N3J');</script><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><title>MitNy.log</title><meta name="next-head-count" content="3"/><meta name="naver-site-verification" content="b408dee953bcbbb1038384f191f36dac0551c0fb"/><meta name="google-site-verification" content="vUtYhRYNCWYYTdurCRaVmtnWpPLuXKKwRAm5F6R9sNs"/><link rel="preload" href="/_next/static/css/647f0c0bd78cf1ee.css" as="style"/><link rel="stylesheet" href="/_next/static/css/647f0c0bd78cf1ee.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-08a247a6c36ab956.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ae98cde0450a008a.js" defer=""></script><script src="/_next/static/chunks/pages/index-ebcacace89ca1a9d.js" defer=""></script><script src="/_next/static/GNyDgAub4tdbhbogE7-p7/_buildManifest.js" defer=""></script><script src="/_next/static/GNyDgAub4tdbhbogE7-p7/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="h-16 bg-white drop-shadow-md text-black"></div><div class="mx-10 my-8"><div><p class="text-4xl font-bold text-neutral-500">Posts</p><div class="w-full min-h-screen pb-24 mt-8"><article class="my-6 p-6 border-solid border-2 rounded-md"><a href="/post/nextjs-amcharts4"><span class="display: inline-block"><p class="text-xl font-bold mb-4 hover:text-rose-400 float-left">amCharts4 적용하기 with Next.js</p></span><p class="text-neutral-500 mb-4">기존에 PHP와 Javascript ES5로 사용하고 있던 amCharts4를 Next.js에서 사용 해보기</p><p class="text-xs">2022-09-21</p></a></article></div><nav class="position-relative translate-y-full mb-20"><ul class="list-none flex justify-center items-center"><li id="prev" class="mr-4 px-3 py-2 float-left cursor-pointer border-solid border-2 rounded-md hover:border-rose-400 md:hover:none pointer-events-none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd"></path></svg></li><li id="1" class="mr-4 px-3 py-2 float-left cursor-pointer border-solid border-2 rounded-md border-rose-400">1</li><li id="next" class="mr-4 px-3 py-2 float-left cursor-pointer border-solid border-2 rounded-md hover:border-rose-400 md:hover:none pointer-events-none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd"></path></svg></li></ul></nav></div></div><footer class="h-16 bg-neutral-500"></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"nextjs-amcharts4","content":"\n\u003cimg src=\"/posts/nextjs-amcharts4/amcharts-light-opaque.png\" width=\"30%\" /\u003e\n\n[amcharts4](https://www.amcharts.com/docs/v4/)\n\u003cbr\u003e지도, 그래프 등 다양한 시각화 기능을 제공한다.\u003cbr\u003e\n현재는 라이선스를 구매해서 사용하고 있는데, 라이선스가 없는 경우 워터마크가 화면에 표시된다.\n\n\n기존에는 이렇게 js 파일을 추가해서 사용했는데\n\n```js\n\u003cscript src=\"/js/amcharts4/core.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/amcharts4/maps.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/amcharts4/charts.js\"\u003e\u003c/script\u003e\n...\n```\n\nNext.js에서 사용하려면 npm 또는 yarn으로 설치해주면 된다.\n```bash\nnpm install @amcharts/amcharts4\n\nyarn add @amcharts/amcharts4\n```\n\n설치 후 사용하려는 곳에서 import를 해주면 된다.\n```js\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\n```\n\n\u003cbr\u003e\u003cbr\u003e\n\n## run... 그리고 error\n\nimport 후 차트가 보이길 기대하면서 npm run을 했는데... 에러가 떴다\n\n```bash\nerror - ~~/node_modules/@amcharts/amcharts4/core.js:8\nexport { System, system } from \"./.internal/core/System\";\n^^^^^^\n\nSyntaxError: Unexpected token 'export'\n    at Object.compileFunction (node:vm:360:18)\n    at wrapSafe (node:internal/modules/cjs/loader:1055:15)\n    at Module._compile (node:internal/modules/cjs/loader:1090:27)\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)\n    at Module.load (node:internal/modules/cjs/loader:1004:32)\n    at Function.Module._load (node:internal/modules/cjs/loader:839:12)\n    at Module.require (node:internal/modules/cjs/loader:1028:19)\n    at require (node:internal/modules/cjs/helpers:102:18)\n    at Object.@amcharts/amcharts4/core (~~~/.next/server/pages/index.js:62:18)\n    at __webpack_require__ (~~~/.next/server/webpack-runtime.js:33:42) {\n  page: '/'\n}\n```\n\namCharts 모듈을 포함해서 transpile 하기 위해 `next-transpile-modules`를 설치해줘야 한다.\n\n```bash\nnpm install next-transpile-modules\n```\n\n설치 후 next.config.js도 수정해야 한다.\n```js\nconst withTM = require(\"next-transpile-modules\")([\"@amcharts/amcharts4\"]);\n\nmodule.exports = withTM({\n// any other general next.js settings\n// EX\n  reactStrictMode: false,\n  webpack: (config, { isServer, node }) =\u003e {\n    node = {\n      ...\n    };\n    return config;\n  }\n})\n```\n\n기존에 사용하던 config 내용들은 withTM 안에 작성해주면 된다.\n\n\n## Pie Chart 예제 추가 해보기\n\n```js\n// components/Charts.ts\nimport { useEffect } from \"react\";\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\n\nexport default function PieChart() {\n\tuseEffect(() =\u003e {\n\t\tlet chart = am4core.create(\"chartdiv\", am4charts.PieChart);\n\t\t\n\t\t// Add data\n\t\tchart.data = [\n\t\t\t{\n\t\t\t\t\"country\": \"Lithuania\",\n\t\t\t\t\"litres\": 501.9\n\t\t\t}, {\n\t\t\t\t\"country\": \"Czech Republic\",\n\t\t\t\t\"litres\": 301.9\n\t\t\t}, {\n\t\t\t\t\"country\": \"Ireland\",\n\t\t\t\t\"litres\": 201.1\n\t\t\t}, {\n\t\t\t\t\"country\": \"Germany\",\n\t\t\t\t\"litres\": 165.8\n\t\t\t}, {\n\t\t\t\t\"country\": \"Australia\",\n\t\t\t\t\"litres\": 139.9\n\t\t\t}, {\n\t\t\t\t\"country\": \"Austria\",\n\t\t\t\t\"litres\": 128.3\n\t\t\t}, {\n\t\t\t\t\"country\": \"UK\",\n\t\t\t\t\"litres\": 99\n\t\t\t}, {\n\t\t\t\t\"country\": \"Belgium\",\n\t\t\t\t\"litres\": 60\n\t\t\t}, {\n\t\t\t\t\"country\": \"The Netherlands\",\n\t\t\t\t\"litres\": 50\n\t\t\t}\n\t\t];\n\n\t\t// Add and configure Series\n\t\tlet pieSeries = chart.series.push(new am4charts.PieSeries());\n\t\tpieSeries.dataFields.value = \"litres\";\n\t\tpieSeries.dataFields.category = \"country\";\n\t\t/**\n \t    * Destroying map on leave page.\n \t    */\n\t    return () =\u003e {\n\t\t\tchart.dispose();\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t\u003cdiv\n\t\t\tid=\"chartdiv\"\n\t\t\tstyle={{\n\t\t\t\twidth: \"60%\",\n\t\t\t\theight: \"300px\"\n\t\t\t}}\n\t\t/\u003e\n\t);\n}\n```\n\n```js\n// pages/chart.tsx\n\n...\nimport PieChart from \"../components/Charts\";\n\nexport default const Chart = () =\u003e {\n\treturn (\n\t\t\u003c\u003e\n\t\t\t\u003cPieChart /\u003e\n\t\t\u003c/\u003e\n\t)\n}\n```\n\n## Pie Chart 예제 결과\n\n\u003cimg src=\"/posts/nextjs-amcharts4/amcharts4-pie-sample.png\" width=\"50%\"/\u003e\n","title":"amCharts4 적용하기 with Next.js","description":"기존에 PHP와 Javascript ES5로 사용하고 있던 amCharts4를 Next.js에서 사용 해보기","date":"2022-09-21"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"GNyDgAub4tdbhbogE7-p7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>