{"pageProps":{"post":{"slug":"2019-09-29-CCE-2019-System-Hardening","content":"\n2019 사이버공격방어대회 예선에서 시스템 하드닝이라는 분야를 처음 접했다.<br>\n서로 다른 환경의 설정 파일을 조건에 맞게 수정하여 업로드하면 플래그를 준다.<br>\n총 3개의 문제가 나왔고 web.xml, elasticsearch.yml, django 설정을 바꾸는 것이었다.<br>\n\n### web.xml\n\n![](/assets/posts/ctf/CCE2019/sh_1.png)\n\n- web.xml 설정을 수정해서 PUT, DELETE 메소드를 차단하세요.\n\nATTACHMENT를 클릭하면 설정 파일이 다운로드 되고, 그 파일을 수정하면 된다.\n\n![](/assets/posts/ctf/CCE2019/sh_1_conf.png)\n\n업로드 해야 할 파일과 테스트 스크립트도 알려준다.\n\nPUT,DELETE 메소드를 차단하려면 `<security-constraint>` 옵션을 추가해주면 된다.\n모든 요청에 대해 PUT, DELETE 메소드를 차단하는 설정은 다음과 같다.\n\n```\n<security-constraint>\n\t<web-resource-collection>\n\t\t<web-resource-name>Restricted methods</web-resource-name>\n\t\t\t<url-pattern>/*</url-pattern>\n\t\t\t<http-method>PUT</http-method>\n\t\t\t<http-method>DELETE</http-method>\n\t\t\t<http-method>OPTIONS</http-method>\n\t\t\t<http-method>TRACE</http-method>\n\t\t</web-resource-collection>\n\t\t<auth-constraint />\n</security-constraint>\n```\n\n![](/assets/posts/ctf/CCE2019/sh_1_flag.png)\n\n\n### elasticsearch.yml\n\n![](/assets/posts/ctf/CCE2019/sh_2.png)\n\n- elasticsearch.yml 파일을 수정해서 localhost Bind 만 허용되게 하시오\n\n![](/assets/posts/ctf/CCE2019/sh_2_conf.png)\n\n![](/assets/posts/ctf/CCE2019/elasticsearchyml.png)\nelasticsearch.yml은 처음 들어보는 파일이었다.\n그래도 web.xml보다 훨씬 짧고 간단하다!\n[Elasticsearch Network Settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html) Elasticsearch의 네트워크 설정에 관한 레퍼런스를 참고하면 `network.host`를 다음과 같이 설정할 수 있다.\n\n![](/assets/posts/ctf/CCE2019/elasticsearch.png)\n\nlocalhost Bind만 허용되게 해야하므로\n`network.host: 0.0.0.0`를 `network.host: _local_`로 변경해주면 된다.\n\n![](/assets/posts/ctf/CCE2019/sh_2_flag.png)\n\n\n### Django\n\n![](/assets/posts/ctf/CCE2019/sh_3.png)\n\n- django 설정을 변경해서 DEBUG 모드를 Off하세요\n\nDjango는 한 번도 안써봤는데 elasticsearch.yml 보다 간단했다.\n\n![](/assets/posts/ctf/CCE2019/sh_3_conf.png)\n\n`설정 파일 폴더/django_proj/settings.py`를 수정하면 된다.\n\n![](/assets/posts/ctf/CCE2019/djangosettings.png)\n\n`DEBUG = True`를 `DEBUG = False`로 바꿔주기만 하면 된다.\n\n![](/assets/posts/ctf/CCE2019/sh_3_flag.png)\n\n\n\n시스템 하드닝 분야는 생소한 이름과는 다르게 점수를 거저주는 문제였다.\n보안 설정에 대해 새로운걸 알게돼서 좋은 기회였다 :)\n","layout":"post","title":"[CTF] 2019 사이버공격방어대회 예선 System Hardening","categories":["CTF"],"excerpt":" ","comments":true,"share":true,"tags":["CTF","write-up"]}},"__N_SSG":true}