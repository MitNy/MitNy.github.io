{"pageProps":{"post":{"slug":"2017-01-18-webhackingkr39","content":"\n```php\n<html>\n<head>\n<title>Chellenge 39</title>\n</head>\n<body>\n\n<?\n\n$pw=\"????\";\n\nif($_POST[id])\n{\n$_POST[id]=str_replace(\"\\\\\",\"\",$_POST[id]);\n$_POST[id]=str_replace(\"'\",\"''\",$_POST[id]);\n$_POST[id]=substr($_POST[id],0,15);\n$q=mysql_fetch_array(mysql_query(\"select 'good' from zmail_member where id='$_POST[id]\"));\n\nif($q[0]==\"good\") @solve();\n\n}\n\n?>\n\n<form method=post action=index.php>\n<input type=text name=id maxlength=15 size=30>\n<input type=submit>\n</form>\n</body>\n</html>\n```\n여기서 쓰인 str_replace 함수의 사용법은\n$_POST[id] = str_replace(\"-\",\"\",$_POST[id]);\n$_POST[id] = str_replace(\"찾을문자열\",\"치환할문자열\",\"대상문자열\");\n\nsubstr은 php에서 문자열에서 일부를 잘라내어 쓰고자 할 때 사용된다.\n**string substr ( string $string , int $start [, int $length ] )**\n$string에 담고 있는 문자열의 $start부터 길이$length만큼을 잘라내어 반환합니다.\n즉, $_POST[id] 문자열에서 \\ -> (공백) , ' -> '' 이렇게 치환되고\n$_POST[id] 문자열에서 0부터 15까지의 구간을 반환한다는 것.\n\n![](/assets/posts/webhackingkr/39_warning.png)\n\n아무거나 입력 했을 땐 이렇게 뜨는데\nindex.php 페이지의 17번째 라인을 보자.\n`select 'good' from zmail_member where id='$_POST[id]`\n자세히 보니 id 부분의 싱글쿼터(')가 닫히지 않았다.\n그럼 싱글쿼터를 닫아주는 형식으로 입력해주면 될 것 같다.\n15개의 글자를 입력해 주고 마지막은 싱글쿼터로 닫아 주어야 하는데 '가 ''으로 치환되므로\nadmin         ' 이런식으로 입력 해주면 16글자가 된다.\n ' 하나가 잘려나가면 15자리 숫자가 되고 싱글쿼터로 닫히므로 문제를 풀 수 있다.\n\n![](/assets/posts/webhackingkr/39_clear.png)\n\n","layout":"post","title":"[Webhacking.kr] 39","categories":["Webhacking.kr"],"excerpt":" ","comments":true,"share":true,"tags":["Web-hacking","webhacking.kr","write-up"]}},"__N_SSG":true}